(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{45:function(e,t,a){},46:function(e,t,a){},73:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(21),r=a.n(c),i=(a(45),a(46),a.p+"static/media/logout.b8745a0e.svg"),o=a(4),l=a.n(o),u=a(14),d=a(10),p=a.n(d),j="LOGIN_SUCCESS",b="LOGIN_FAIL",m="USER_LOADED",h="LOGOUT",O="REGISTER_FAIL",f="REGISTER_SUCCESS",g="SET_ALERT",v="REMOVE_ALERT",x="CREATE_LIST",_="EDIT_LIST",y="DELETE_LIST",L="LIST_ERROR",k="GET_LISTS",N="SORT_LISTS",S=function(e){e?p.a.defaults.headers.common={Authorization:"Bearer ".concat(e)}:delete p.a.defaults.headers.common.Authorization},w=a(85),C=function(e,t,a){return function(n){var s=Object(w.a)();n({type:g,payload:{msg:e,alertType:t,id:s}}),setTimeout((function(){return n({type:v,payload:s})}),a)}},E=function(){return function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&S(localStorage.token),e.prev=1,e.next=4,p.a.get("https://recruitment.ultimate.systems/users/me");case 4:a=e.sent,t({type:m,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},A=a(5),T=a(1),M=Object(A.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:function(){return function(e){localStorage.token&&(localStorage.removeItem("token"),S()),e({type:h}),e(C("Logout successfull!","danger",3e3))}}})((function(e){var t=e.logout,a=e.isAuthenticated;return Object(T.jsxs)("div",{className:"navbar",children:[Object(T.jsx)("div",{className:"navbar__div",children:"ToDo-List"}),a?Object(T.jsx)("img",{className:"navbar__img",src:i,alt:"logout",onClick:function(e){return t()}}):Object(T.jsx)(T.Fragment,{})]})})),I=a(16),D=a(3),R=a(13),W=a(2),F=a(9),U=(a(73),Object(A.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var a=Object(u.a)(l.a.mark((function a(n){var s,c,r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={headers:{"Content-Type":"application/json"}},c=JSON.stringify({identifier:e,password:t}),a.prev=2,a.next=5,p.a.post("https://recruitment.ultimate.systems/auth/local",c,s);case 5:r=a.sent,n({type:j,payload:r.data}),n(E()),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),n({type:b}),n(C(a.t0.message,"danger",3e3));case 14:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()},setAlert:C})((function(e){var t=e.login,a=(e.setAlert,e.isAuthenticated),s=Object(n.useState)({identifier:"",password:""}),c=Object(F.a)(s,2),r=c[0],i=c[1],o=r.identifier,l=r.password,u=function(e){return i(Object(W.a)(Object(W.a)({},r),{},Object(R.a)({},e.target.name,e.target.value)))};return Object(T.jsx)(T.Fragment,{children:a?Object(T.jsx)(D.a,{to:"/todo-list/ListWrapper"}):Object(T.jsxs)("div",{className:"login",children:[Object(T.jsx)("h1",{className:"login__h1",children:"Login"}),Object(T.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),console.log(r),t(o,l)}(e)},className:"login__div",children:[Object(T.jsx)("input",{className:"login__input",type:"text",value:o,name:"identifier",onChange:function(e){return u(e)},placeholder:"Email or Username"}),Object(T.jsx)("input",{className:"login__input",type:"password",value:l,name:"password",onChange:function(e){return u(e)},placeholder:"Password"}),Object(T.jsx)("button",{className:"login__button",type:"submit",children:"Login"})]}),Object(T.jsx)("p",{className:"login__p",children:"or"}),Object(T.jsx)(I.b,{to:"/todo-list/register",className:"login__a",children:"create an account"})]})})}))),G=(a(78),Object(A.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{register:function(e,t,a){return function(){var n=Object(u.a)(l.a.mark((function n(s){var c,r,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"application/json; charset=utf-8"}},r=JSON.stringify(e,t,a),console.log(r),n.prev=3,n.next=6,p.a.post("https://recruitment.ultimate.systems/auth/local/register",r,c);case 6:i=n.sent,console.log("res:"+i),s({type:f,payload:i.data}),s(E()),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(3),s({type:O,payload:n.t0.message}),console.log(n.t0.response),s(C(n.t0.message,"danger",3e3));case 17:case"end":return n.stop()}}),n,null,[[3,12]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.register,a=e.isAuthenticated,s=Object(n.useState)({username:"",email:"",password:"",password2:""}),c=Object(F.a)(s,2),r=c[0],i=c[1],o=r.username,l=r.email,u=r.password,d=r.password2,p=function(e){i(Object(W.a)(Object(W.a)({},r),{},Object(R.a)({},e.target.name,e.target.value)))};return Object(T.jsx)(T.Fragment,{children:a?Object(T.jsx)(D.a,{to:"/todo-list/ListWrapper"}):Object(T.jsxs)("div",{className:"register",children:[Object(T.jsx)(I.b,{className:"register__iconWrapper",to:"/todo-list",children:Object(T.jsx)("div",{className:"register__icon"})}),Object(T.jsx)("h1",{className:"register__h1",children:"Create a new account"}),Object(T.jsxs)("form",{className:"register__inputWrapper",onSubmit:function(e){return function(e){e.preventDefault(),t({username:o,email:l,password:u})}(e)},children:[Object(T.jsx)("input",{className:"register__input",type:"text",placeholder:"Username",name:"username",value:o,onChange:function(e){return p(e)}}),Object(T.jsx)("input",{className:"register__input",type:"text",placeholder:"Email",name:"email",value:l,onChange:function(e){return p(e)}}),Object(T.jsx)("input",{className:"register__input",type:"password",placeholder:"Password",name:"password",value:u,onChange:function(e){return p(e)}}),Object(T.jsx)("input",{className:"register__input",type:"password",placeholder:"Repeat password",value:d,name:"password2",onChange:function(e){return p(e)}}),Object(T.jsx)("button",{className:"register__button",type:"submit",children:"Create"})]})]})})}))),J=a(12),B=(a(79),a(23)),z=["id"],P=Object(A.b)(null,{createList:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(a){var n,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{"Content-Type":"application/json"}},s=JSON.stringify(e),t.prev=2,t.next=5,p.a.post("https://recruitment.ultimate.systems/to-do-lists",s,n);case 5:c=t.sent,console.log(c.data),a({type:x,payload:c.data}),a(C("List created!","success",3e3)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),a({type:L}),a(C(t.t0.message,"danger",3e3));case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},editList:function(e,t){return function(){var a=Object(u.a)(l.a.mark((function a(n){var s,c,r,i,o;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={headers:{"Content-Type":"application/json"}},c=t.name,r=t.task.map((function(e){e.id;return Object(B.a)(e,z)})),i=JSON.stringify({name:c,task:r}),a.prev=4,a.next=7,p.a.put("https://recruitment.ultimate.systems/to-do-lists/".concat(e),i,s);case 7:o=a.sent,n({type:_,payload:o.data}),n(C("List edited!","success",3e3)),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(4),n({type:L}),n(C(a.t0.message,"danger",3e3));case 16:case"end":return a.stop()}}),a,null,[[4,12]])})));return function(e){return a.apply(this,arguments)}}()},deleteList:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(a){var n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{"Content-Type":"application/json"}},t.prev=1,t.next=4,p.a.delete("https://recruitment.ultimate.systems/to-do-lists/".concat(e),n);case 4:s=t.sent,a({type:y,payload:s.data}),a(C("List deleted!","info",3e3)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:L}),a(C(t.t0.message,"danger",3e3));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.name,a=e.tasks,s=e.createList,c=e.editList,r=e.deleteList,i=e.handler,o=e.id,l=Object(n.useState)({name:t,task:a?Object(J.a)(a):[]}),u=Object(F.a)(l,2),d=u[0],p=u[1],j=Object(n.useState)({id:Math.random(),name:"",isDone:!1}),b=Object(F.a)(j,2),m=b[0],h=b[1],O=function(e,t){e.preventDefault();var a=Object(J.a)(d.task);console.log(a),"checkbox"===e.target.type?a[t].isDone=e.target.checked:a[t].name=e.target.value,p({name:d.name,task:Object(J.a)(a)}),console.log(d)};return Object(T.jsxs)("div",{className:"ListModal ListModal--open",children:[Object(T.jsx)("input",{className:"ListModal__input",name:"name",value:d.name,onChange:function(e){return p(Object(W.a)(Object(W.a)({},d),{},Object(R.a)({},e.target.name,e.target.value)))}}),Object(T.jsx)("div",{className:"ListModal__line"}),Object(T.jsxs)("div",{className:"ListModal__tasks",children:[d.task?d.task.map((function(e,t){return Object(T.jsxs)("div",{className:"ListModal__task",children:[Object(T.jsx)("input",{type:"checkbox",name:"isDone",checked:e.isDone,className:"ListModal__checkbox",onChange:function(e){return O(e,t)}},Math.random()),Object(T.jsx)("input",{type:"text",name:"name",className:"ListModal__taskName",value:e.name,onChange:function(e){return O(e,t)}})]},e.id)})):Object(T.jsx)("div",{}),Object(T.jsxs)("form",{className:"ListModal__task",children:[Object(T.jsx)("input",{type:"checkbox",name:"isDone",className:"ListModal__checkbox",checked:m.isDone,onChange:function(e){return h(Object(W.a)(Object(W.a)({},m),{},Object(R.a)({},e.target.name,e.target.checked)))}}),Object(T.jsx)("input",{className:"ListModal__taskName",type:"text",value:m.name,placeholder:"New task",name:"name",onChange:function(e){return h(Object(W.a)(Object(W.a)({},m),{},Object(R.a)({},e.target.name,e.target.value)))}}),Object(T.jsxs)("div",{children:[Object(T.jsx)("button",{className:"ListModal__button ListModal__button--orange",disabled:""===m.name||m.name.length<=0,onClick:function(e){!function(e){e.preventDefault(),d.task.length>0?p(Object(W.a)(Object(W.a)({},d),{},{task:[].concat(Object(J.a)(d.task),[m])})):p(Object(W.a)(Object(W.a)({},d),{},{task:[m]}))}(e),h({name:"",isDone:!1})},type:"submit",children:"ADD"}),Object(T.jsx)("button",{onClick:function(e){h({name:"",isDone:!1}),e.preventDefault()},className:"ListModal__button ListModal__button--darkOrange",children:"CANCEL"})]})]})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("button",{className:"ListModal__button ListModal__button--gray",onClick:i,children:"CANCEL"}),Object(T.jsx)("button",{className:"ListModal__button ListModal__button--orange",onClick:function(e){o?c(o,d):s(d),i()},disabled:0===d.task.length||d.name.length<=0,children:"SAVE"}),Object(T.jsx)("button",{className:"ListModal__button ListModal__button--darkOrange",onClick:function(e){r(o),i()},children:"DELETE"})]})]})})),V=(a(80),function(e){var t=e.name,a=e.createdAt,s=e.completed,c=e.uncompleted,r=e.tasks,i=e.id,o=Object(n.useState)(!1),l=Object(F.a)(o,2),u=l[0],d=l[1],p=function(){d(!u)};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"ListItem",onClick:p,children:[Object(T.jsx)("div",{className:"ListItem__name",children:t}),Object(T.jsx)("div",{className:"ListItem__date",children:"Created at: "+a.substr(0,19).replace("T"," ")}),Object(T.jsxs)("div",{className:"ListItem__wrapper",children:[Object(T.jsx)("div",{className:"ListItem__completed",children:"Completed: "+s}),Object(T.jsx)("div",{className:"ListItem__uncompleted",children:"Uncompleted: "+c}),Object(T.jsx)("div",{className:"ListItem__all",children:"All: "+(s+c)})]})]}),u?Object(T.jsx)(P,{id:i,name:t,tasks:r,handler:p}):null]})}),H=(a(81),Object(A.b)((function(e){return{list:e.list,auth:e.auth}}),{getLists:function(){return function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,p.a.get("https://recruitment.ultimate.systems/to-do-lists",a);case 4:n=e.sent,t({type:k,payload:n.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:L}),t(C(e.t0.message,"danger",3e3));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},sortLists:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(a){var n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{"Content-Type":"application/json"}},t.prev=1,t.next=4,p.a.get("https://recruitment.ultimate.systems/to-do-lists?_sort=".concat(e),n);case 4:s=t.sent,console.log(s.data),a({type:N,payload:s.data}),a(C("List sorted!","info",3e3)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),a({type:L}),a(C(t.t0.message,"danger",3e3));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.getLists,a=e.sortLists,s=e.list,c=s.loading,r=s.list,i=e.auth,o=Object(n.useState)(!1),l=Object(F.a)(o,2),u=l[0],d=l[1],p=function(){d(!u)},j=Object(n.useState)(""),b=Object(F.a)(j,2),m=b[0],h=b[1],O=Object(n.useState)(["name","created_at","updated_at"]),f=Object(F.a)(O,2),g=f[0],v=(f[1],function(e,t){var a=0,n=0;return e.task.map((function(e){return!0===e.isDone?a++:n++})),"completed"===t?a:n});return Object(n.useEffect)((function(){i.loading||t()}),[i.loading,t]),Object(T.jsxs)("div",{className:"ListWrapper",children:[Object(T.jsxs)("div",{className:"ListWrapper__inputWrapper",children:[Object(T.jsx)("input",{type:"text",placeholder:"Search",name:"search",className:"ListWrapper__input",value:m,onChange:function(e){return h(e.target.value)}}),Object(T.jsx)("select",{id:"options",name:"Sort by",className:"ListWrapper__select",onChange:function(e){!function(e){g[e.target.value]}(e),a(e.target.value)},children:g.map((function(e){return Object(T.jsx)("option",{value:e,children:e})}))})]}),c?Object(T.jsx)("div",{className:"ListWrapper__loading"}):r.map((function(e){return e.name.toLowerCase().trim().includes(m.toLowerCase().trim())?Object(T.jsx)(V,{name:e.name,createdAt:e.created_at,completed:v(e,"completed"),uncompleted:v(e),tasks:e.task,handler:p,id:e.id},e.id):null})),r&&0===r.length&&!c?Object(T.jsx)("div",{className:"ListWrapper__info",children:"Nothing here :/"}):null,Object(T.jsx)("div",{className:"ListWrapper__addButton",onClick:p}),u?Object(T.jsx)(P,{name:"List name",handler:p}):null]})}))),q=["component","auth"],K=Object(A.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=a.isAuthenticated,s=a.loading,c=Object(B.a)(e,q);return Object(T.jsx)(D.b,Object(W.a)(Object(W.a)({},c),{},{render:function(e){return n||s?Object(T.jsx)(t,Object(W.a)({},e)):Object(T.jsx)(D.a,{to:"/todo-list/"})}}))})),Q=a(18),X=a(39),Y=a(40),Z={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0};var $=[];var ee={list:[],loading:!0};var te=Object(Q.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case m:return Object(W.a)(Object(W.a)({},e),{},{isAuthenticated:!0,loading:!1});case j:case f:return localStorage.setItem("token",n.jwt),Object(W.a)(Object(W.a)({},e),{},{token:n.jwt,isAuthenticated:!0,loading:!1});case O:case b:case h:return localStorage.removeItem("token"),Object(W.a)(Object(W.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case g:return[].concat(Object(J.a)(e),[n]);case v:return e.filter((function(e){return e.id!==n}));default:return e}},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case x:return Object(W.a)(Object(W.a)({},e),{},{list:[].concat(Object(J.a)(e.list),[n]),loading:!1});case k:case N:return Object(W.a)(Object(W.a)({},e),{},{list:Object(J.a)(n),loading:!1});case _:return Object(W.a)(Object(W.a)({},e),{},{list:[].concat(Object(J.a)(e.list.filter((function(e){return e.id!==n.id}))),[n]),loading:!1});case L:return Object(W.a)(Object(W.a)({},e),{},{loading:!1});case y:return Object(W.a)(Object(W.a)({},e),{},{list:Object(J.a)(e.list.filter((function(e){return e.id!==n.id}))),loading:!1});default:return e}}}),ae=[Y.a],ne=Object(Q.createStore)(te,{},Object(X.composeWithDevTools)(Q.applyMiddleware.apply(void 0,ae))),se=(a(82),Object(A.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return Object(T.jsx)(T.Fragment,{children:null!==t&&t.length>0?t.map((function(e){return Object(T.jsx)("div",{className:"alert alert--".concat(e.alertType),children:e.msg},e.id)})):Object(T.jsx)(T.Fragment,{})})}))),ce=function(){return Object(n.useEffect)((function(){localStorage.token&&S(localStorage.token),ne.dispatch(E())}),[]),Object(T.jsx)(A.a,{store:ne,children:Object(T.jsxs)(I.a,{children:[Object(T.jsx)(M,{}),Object(T.jsx)(se,{}),Object(T.jsxs)(D.d,{children:[Object(T.jsx)(D.b,{exact:!0,path:"/todo-list",component:U}),Object(T.jsx)(D.b,{exact:!0,path:"/todo-list/register",component:G}),Object(T.jsx)(K,{exact:!0,path:"/todo-list/ListWrapper",component:H})]})]})})};r.a.render(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(ce,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.37bcbe9d.chunk.js.map